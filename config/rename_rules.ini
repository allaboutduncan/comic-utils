[RENAME]
# Higher priority number runs earlier in YOUR setup

# 130) "Series #### ## (of ##) (YYYY)" → Series #### 0## (YYYY) (series name with non-year 4-digit numbers like Marvel 1602)
rule130.pattern = ^(?P<series>.*?\s+(?:1[0-8]\d{2}|19[0-3]\d|20[5-9]\d|2[1-9]\d{2}))\s+(?P<issue>\d{1,4})\s+\(of\s+\d+\)\s+\((?P<year>19[4-9]\d|20[0-4]\d)\)(?:\s*\([^)]*\))*(?P<ext>\.\w+)?$
rule130.output  = {series|title} {issue|pad3} ({year}){ext}
rule130.priority= 130

# 135) "Series Season # ## (YYYY)" → Series Season # 0## (YYYY) (season patterns)
rule135.pattern = ^(?P<series>.*?)\s+(?P<season>Season\s+\d{1,3})\s+(?P<issue>\d{1,4})\s*\((?P<year>\d{4})\)(?:\s*\([^)]*\))*(?P<ext>\.\w+)?$
rule135.output  = {series|title} {season} {issue|pad3} ({year}){ext}
rule135.priority= 135

# 134) "Series Season # ## (of ##) (YYYY)" → Series Season # 0## (YYYY) (season with issue count)
rule134.pattern = ^(?P<series>.*?)\s+(?P<season>Season\s+\d{1,3})\s+(?P<issue>\d{1,4})\s+\(of\s+\d+\)\s+\((?P<year>\d{4})\)(?:\s*\([^)]*\))*(?P<ext>\.\w+)?$
rule134.output  = {series|title} {season} {issue|pad3} ({year}){ext}
rule134.priority= 134

# 133) "Series Season # ## (YYYY) ..." → Series Season # 0## (YYYY) (season patterns with extra info)
rule133.pattern = ^(?P<series>.*?)\s+(?P<season>Season\s+\d{1,3})\s+(?P<issue>\d{1,4}).*\((?P<year>\d{4})\)(?:\s*\([^)]*\))*(?:\s*(?P<ext>\.\w+))?$
rule133.output  = {series|title} {season} {issue|pad3} ({year}){ext}
rule133.priority= 133

# 132) "Series Season # ##" → Series Season # 0## (no year)
rule132.pattern = ^(?P<series>.*?)\s+(?P<season>Season\s+\d{1,3})\s+(?P<issue>\d{1,4})(?P<ext>\.\w+)?$
rule132.output  = {series|title} {season} {issue|pad3}{ext}
rule132.priority= 132

# 131) "Series Season # #" → Series Season # 0# (single digit issue)
rule131.pattern = ^(?P<series>.*?)\s+(?P<season>Season\s+\d{1,3})\s+0?(?P<issue>\d{1})(?P<ext>\.\w+)?$
rule131.output  = {series|title} {season} {issue|pad3}{ext}
rule131.priority= 131

# 125) "Series_v#_(extra)_(YYYY)_##_(of_##)_(group)" → Series v# 0## (YYYY) (with underscores and extra info)
rule125.pattern = ^(?P<series>[^_]+)_(?P<volume>v\d{1,3})_\([^)]*\)_\((?P<year>\d{4})\)_(?P<issue>\d{1,4})_\(of_\d+\)_\([^)]*\)(?P<ext>\.\w+)?$
rule125.output  = {series|title} {volume} {issue|pad3} ({year}){ext}
rule125.priority= 125

# 120) "Series #### ## (of ##) (YYYY)" → Series #### 0## (YYYY) (series name with numbers)
rule120.pattern = ^(?P<series>.*\s+\d+)\s+(?P<issue>\d{1,4})\s+\(of\s+\d+\)\s+\((?P<year>\d{4})\)(?:\s*\([^)]*\))*(?P<ext>\.\w+)?$
rule120.output  = {series|title} {issue|pad3} ({year}){ext}
rule120.priority= 120

# 117) "Series (YYYY) ###" → Series 0### (YYYY) (year before issue - reversed order)
rule117.pattern = ^(?P<series>.*?)\s+\((?P<year>\d{4})\)\s+(?P<issue>\d{1,4})(?P<ext>\.\w+)?$
rule117.output  = {series|title} {issue|pad3} ({year}){ext}
rule117.priority= 117

# 115) "Series # ### (YYYY)" → Series # 0### (YYYY) (where # is part of series name, NOT volume or season)
rule115.pattern = ^(?P<series>.*\s+\d+)(?!\s+(?:v\d+|Season\s+\d{1,3}))\s+(?P<issue>\d{1,4})\s*\((?P<year>\d{4})\)(?:\s*\([^)]*\))*(?P<ext>\.\w+)?$
rule115.output  = {series|title} {issue|pad3} ({year}){ext}
rule115.priority= 115

# 110) "Series International/Annual v# ### (YYYY)" → Keep full name as-is
rule110.pattern = ^(?P<series>.*?(?:International|Annual).*?)\s+(?P<volume>v\d+\s+)?(?P<special>Annual\s+)?(?P<issue>\d{1,4})\s*\((?P<year>\d{4})\)(?:\s*\([^)]*\))*(?P<ext>\.\w+)?$
rule110.output  = {series|title} {volume}{special}{issue|pad3} ({year}){ext}
rule110.priority= 110

# 105) "Series (YYYY-MM) ### (...)" → Series 0### (YYYY) - but NOT for International/Annual/Season/etc
rule105.pattern = ^(?P<series>(?!.*(?:International|Annual|v\d+|Season\s+\d{1,3})).*?)\s*\((?P<year>\d{4})-\d{2}\)\s+(?P<issue>\d{1,4})(?:\s*\([^)]*\))*(?P<ext>\.\w+)?$
rule105.output  = {series|title} {issue|pad3} ({year}){ext}
rule105.priority= 105

# 100) "Series, YYYY ### ..." → Series 0### (YYYY)
rule100.pattern = ^(?P<series>.*?),\s*(?P<year>\d{4})\s+(?P<issue>\d{1,4})(?:\s*\([^)]*\))*(?:\s*(?P<ext>\.\w+))?$
rule100.output  = {series|title} {issue|digits|pad3} ({year}){ext}
rule100.priority= 100

# 95) "Series YYYY ### ..." (no comma) → Series 0### (YYYY)
rule95.pattern = ^(?P<series>.*?)\s+(?P<year>\d{4})\s+(?P<issue>_?#?\d{1,4})(?:\s*\([^)]*\))?(?P<ext>\.\w+)?$
rule95.output  = {series|title} {issue|digits|pad3} ({year}){ext}
rule95.priority= 95

# 90) "Series, YYYY-MM-DD (NN) ..." or "(_NN)" → Series 0NN (YYYY)
rule90.pattern = ^(?P<series>.*?),\s*(?P<year>\d{4})-(?:\d{2})(?:-\d{2})?\s*\(\s*(?P<issue>_?#?\d{1,4})\s*\)(?:\s*\([^)]*\))*(?:\s*(?P<ext>\.\w+))?$
rule90.output  = {series|title} {issue|digits|pad3} ({year}){ext}
rule90.priority= 90

# 85) Series-specific: 2000AD uses 4-digit issues
rule85_2000ad.pattern = ^(?P<series>2000AD)\s*(?P<issue>\d{1,4}).*\((?P<year>\d{4})\)(?:\s*\([^)]*\))*(?:\s*(?P<ext>\.\w+))?$
rule85_2000ad.output  = {series} {issue|pad4} ({year}){ext}
rule85_2000ad.priority= 85

# 85) "Series v# ### (YYYYMM)..." → Series v# 0### (YYYY) (6-digit year-month in parens)
rule85_yearmonth.pattern = ^(?P<series>.*?)\s+(?P<volume>v\d{1,3})\s+(?P<issue>\d{1,4})\s+\((?P<yearmonth>\d{6})\).*(?P<ext>\.\w+)?$
rule85_yearmonth.output  = {series|title} {volume} {issue|pad3} ({yearmonth|year4}){ext}
rule85_yearmonth.priority= 85

# 80) "Series v# ### (YYYY) ..." → Series v# 0### (YYYY)
rule80.pattern = ^(?P<series>.*?)\s+(?P<volume>v\d{1,3})\s+(?P<issue>\d{1,4}).*\((?P<year>\d{4})\)(?:\s*\([^)]*\))*(?:\s*(?P<ext>\.\w+))?$
rule80.output  = {series|title} {volume} {issue|pad3} ({year}){ext}
rule80.priority= 80

# 70) "Series #### (YYYY) ..." → Series 0### (YYYY)
rule70.pattern = ^(?P<series>.*?)\s*#(?P<issue>\d{1,4}).*\((?P<year>\d{4})\)(?:\s*\([^)]*\))*(?:\s*(?P<ext>\.\w+))?$
rule70.output  = {series|title} {issue|pad3} ({year}){ext}
rule70.priority= 70

# 60) "Series ### (YYYY) ..." (no v or #) → Series 0### (YYYY)
rule60.pattern = ^(?P<series>.*?)\s+(?P<issue>\d{1,4}).*\((?P<year>\d{4})\)(?:\s*\([^)]*\))*(?:\s*(?P<ext>\.\w+))?$
rule60.output  = {series|title} {issue|pad3} ({year}){ext}
rule60.priority= 60

# 55) "YYYYMM Series ### ()..." → Series 0### (YYYY) (yearmonth before series name, no volume)
rule55.pattern = ^(?P<yearmonth>\d{6})\s+(?P<series>.*?)\s+(?P<issue>\d{1,4})\s+\(\s*\).*(?P<ext>\.\w+)?$
rule55.output  = {series|title} {issue|pad3} ({yearmonth|year4}){ext}
rule55.priority= 55

# 50) "YYYYMM Series v# ###.ext" → Series v# 0### (YYYY).ext
rule50.pattern = ^(?P<yearmonth>\d{6})\s+(?P<series>.*?)\s+(?P<volume>v\d{1,3})\s+(?P<issue>\d{1,4})(?P<ext>\.\w+)?$
rule50.output  = {series|title} {volume} {issue|pad3} ({yearmonth|year4}){ext}
rule50.priority= 50

# 40) "Series (YYYY) #### ..." → Series 0### (YYYY)
rule40.pattern = ^(?P<series>.*?)\s*\((?P<year>\d{4})\)\s*#(?P<issue>\d{1,4}).*(?P<ext>\.\w+)?$
rule40.output  = {series|title} {issue|pad3} ({year}){ext}
rule40.priority= 40

# 30) "Series YYYY-MM ( NN ) (YYYY) ..." → Series 0NN (YYYY)
rule30.pattern = ^(?P<series>.*?)\s+(?P<year>\d{4})-\d{2}\s*\(\s*(?P<issue>_?\d{1,3})\s*\)\s*\((?:\d{4})\).*(?P<ext>\.\w+)?$
rule30.output  = {series|title} {issue|digits|pad3} ({year}){ext}
rule30.priority= 30

# 20) "Series YYYY-MM-DD ( NN ) ..." → Series 0NN (YYYY)
rule20.pattern = ^(?P<series>.*?)[,\s]+(?P<year>\d{4})-\d{2}-\d{2}\s*\(\s*(?P<issue>_?\d{1,3})\s*\)(?:\s*\([^)]*\))*\s*(?P<ext>\.\w+)$
rule20.output  = {series|title} {issue|digits|pad3} ({year}){ext}
rule20.priority= 20

# 10) "Series ### extra_info YYYY" → Series 0### (YYYY) (edge case with extra metadata between issue and year)
rule10.pattern = ^(?P<series>.*?)\s+(?P<issue>\d{1,4})\s+.*?\s+(?P<year>\d{4})(?P<ext>\.\w+)?$
rule10.output  = {series|title} {issue|pad3} ({year}){ext}
rule10.priority= 10
